######################################################
##
## Component public variables
##
## Variables accesible to the experimenter.
##
## They are contained inside 3 global variables
## with all required info:
##
##   1. metadata: General information like mantainers,
##      component dependencies and allowed platforms
##
##   2. input: Customizable variables for each
##      deployment to be filled by the experimenter
##      or the TNLCM
##
##   3. output: Values sent to the TNLCM callback to
##      keep track of the TN deployments
##
######################################################


####################################
## Component metadata
####################################
metadata:
  maintainers:
    - Jesus Macias Portela <jesus.maciasportela@telefonica.com>
    - Ana Isabel Lara García <anaisabel.laragarcia@telefonica.com>
    - Álvaro Curto Merino <alvaro.curtomerino@telefonica.com>
  short_description: Enables routing between Nokia Airscale and a previously deployed 5G Core.
  long_description: |
    Component to integrate the Nokia Airscale physical equipment with a 5G core already deployed inside the Trial Network.
    It is done by enabling the necessary routing path using a [6G-Sandbox route-manager-api](https://marketplace.mobilesandbox.cloud:9443/appliance/service_routemanager) VM expected to be already deployed in the site.
    WARNING: This component may only work if the configurations for the related 5G Core and UE are set as follows:
    - `mcc`: "214" 
    - `mnc`: "702"
    - `apn`: "internet"
    - `tac`: 1
    - `s_nssai_sst`: 1
    - `s_nssai_sd`: "000009"
    - `amf_ip`: "10.10.12.200"
    - `upf_ip`: "10.10.12.201"
    NOTE: Currently this component is only available in the site "uma".
  hypervisors: [one]
  destroy_script: true

####################################
## Component input
####################################

input:
  nokia_radio_one_open5gs:
    description: Name of a previosly deployed Open5GS 5G Core
    type: "open5gs_vm or open5gs_k8s"
    required_when: true

  nokia_radio_any_duration:
    description: Time in seconds for the Nokia Airsale reservation
    type: int
    default_value: 3600
    required_when: false


####################################
## Component output
####################################
output:
  metadata_dict: # Dictionary with multiple parameters about the nokia_radio component
    open5gs: input.nokia_radio_one_open5gs
    duration: ipnut.nokia_radio_any_duration
    # up_ip: site_variables.up_ip
    # core_network: site_variables.core_network
    # route_manager_ip1: site_variables.route_manager_ip1
    # route_manager_ip2: site_variables.route_manager_ip2
    # mcc: site_variables.mcc
    # mnc: site_variables.mnc
    # tac: site_variables.tac
    # s_nssai_sst: site_variables.s_nssai_sst
    # s_nssai_sd: site_variables.s_nssai_sd
    # amf_ip: site_variables.amf_ip
    # upf_ip: site_variables.upf_ip


####################################
## Site-specific variables
####################################
site_variables:
  cp_ip: Nokia Airscale IP address
  up_ip: Nokia Airscale IP address   # TODO: Diferencia??
  # route_manager_ip1: 6G-Sandbox route-manager-api IP address reachable to the Jenkins-master
  # route_manager_ip2: TODO: Currently unused
  # core_network: Subnetwork (CIDR) of the private subnet of the input.nokia_radio_one_oneKE. Will be autocompleted in the future
  # mcc:   # Unused, will complete other components dependencies in the future
  # mnc:   # Unused, will complete other components dependencies in the future
  # tac:   # Unused, will complete other components dependencies in the future
  # s_nssai_sst:   # Unused, will complete other components dependencies in the future
  # s_nssai_sd:    # Unused, will complete other components dependencies in the future
  # amf_ip:    # Unused, will complete other components dependencies in the future
  # upf_ip:    # Unused, will complete other components dependencies in the future
  # quantity: TODO: Currently unused